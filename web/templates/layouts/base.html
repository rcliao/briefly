<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="AI-curated tech news digest with weekly insights">

    <title>{{ block "title" . }}Briefly - Tech News Digest{{ end }}</title>

    <!-- Nord Minimal Theme -->
    <link rel="stylesheet" href="/static/css/nord-minimal.css">

    <!-- HTMX for partial updates -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Keyboard Navigation -->
    <script src="/static/js/keyboard-nav.js"></script>

    <!-- PostHog Analytics -->
    {{ if .PostHogEnabled }}
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('{{ .PostHogAPIKey }}', {api_host: '{{ .PostHogHost }}'})
    </script>
    {{ end }}

    {{ block "head" . }}{{ end }}
</head>
<body>
    <!-- Header -->
    {{ template "partials/header.html" . }}

    <!-- Main Content -->
    <main class="container">
        {{ block "content" . }}{{ end }}
    </main>

    <!-- Footer -->
    {{ template "partials/footer.html" . }}

    <!-- Keyboard Shortcuts Modal -->
    <div id="keyboard-help-modal" class="modal" style="display: none;" role="dialog" aria-labelledby="modal-title" aria-modal="true">
        <div class="modal-overlay" onclick="closeKeyboardModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Keyboard Shortcuts</h2>
                <button class="modal-close" onclick="closeKeyboardModal()" aria-label="Close modal">×</button>
            </div>
            <div class="modal-body">
                <!-- Homepage Shortcuts -->
                <section class="shortcut-section">
                    <h3>Homepage</h3>
                    <dl class="shortcut-list">
                        <div class="shortcut-item">
                            <dt><kbd>h</kbd> / <kbd>l</kbd> or <kbd>←</kbd> / <kbd>→</kbd></dt>
                            <dd>Navigate themes</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>j</kbd> / <kbd>k</kbd></dt>
                            <dd>Navigate digests</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>Enter</kbd> / <kbd>o</kbd></dt>
                            <dd>Open digest or activate theme</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>y</kbd></dt>
                            <dd>Copy focused content</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>Esc</kbd></dt>
                            <dd>Exit digest mode</dd>
                        </div>
                    </dl>
                </section>

                <!-- Digest Detail Shortcuts -->
                <section class="shortcut-section">
                    <h3>Digest Detail</h3>
                    <dl class="shortcut-list">
                        <div class="shortcut-item">
                            <dt><kbd>j</kbd> / <kbd>k</kbd></dt>
                            <dd>Next/previous section or article</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>Enter</kbd> / <kbd>o</kbd></dt>
                            <dd>Enter articles or open link</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>y</kbd></dt>
                            <dd>Copy focused content</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>Esc</kbd></dt>
                            <dd>Exit article mode</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>h</kbd></dt>
                            <dd>Back to home</dd>
                        </div>
                    </dl>
                </section>

                <!-- General Shortcuts -->
                <section class="shortcut-section">
                    <h3>General</h3>
                    <dl class="shortcut-list">
                        <div class="shortcut-item">
                            <dt><kbd>?</kbd></dt>
                            <dd>Show this help</dd>
                        </div>
                        <div class="shortcut-item">
                            <dt><kbd>Esc</kbd></dt>
                            <dd>Close modal</dd>
                        </div>
                    </dl>
                </section>
            </div>
        </div>
    </div>

    {{ block "scripts" . }}{{ end }}
</body>
</html>
