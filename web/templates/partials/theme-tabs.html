<!-- Theme filter chips -->
<div class="mb-6">
    <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2">
            <h2 class="text-base md:text-lg font-semibold text-base-content/70">Filter by Theme</h2>
            <span id="tab-loading" class="loading loading-spinner loading-sm htmx-indicator"></span>
        </div>
        <!-- Active theme indicator -->
        {{ if .ActiveTheme }}
        <button
            class="btn btn-ghost btn-xs gap-1"
            hx-get="/?theme=all"
            hx-target="#digest-list"
            hx-swap="innerHTML transition:true"
            hx-push-url="true"
            hx-indicator="#tab-loading">
            Clear filter
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
        </button>
        {{ end }}
    </div>

    <!-- Compact filter chips -->
    <div class="flex flex-wrap gap-2">
        <!-- All Themes chip -->
        <button
            class="btn btn-sm {{ if not .ActiveTheme }}btn-primary{{ else }}btn-ghost{{ end }} gap-1.5 transition-all"
            hx-get="/?theme=all"
            hx-target="#digest-list"
            hx-swap="innerHTML transition:true"
            hx-push-url="true"
            hx-indicator="#tab-loading"
            onclick="if(window.posthog) posthog.capture('theme_tab_clicked', {theme: 'all'})">
            <span>ðŸ“‹</span>
            <span class="font-medium">All</span>
            {{ if .AllCount }}
            <span class="badge badge-xs {{ if not .ActiveTheme }}badge-neutral{{ else }}badge-ghost{{ end }}">{{ .AllCount }}</span>
            {{ end }}
        </button>

        <!-- Individual theme chips -->
        {{ range .Themes }}
        <button
            class="btn btn-sm {{ if eq .ID $.ActiveTheme }}btn-primary{{ else }}btn-ghost{{ end }} gap-1.5 transition-all hover:scale-105"
            hx-get="/?theme={{ .ID }}"
            hx-target="#digest-list"
            hx-swap="innerHTML transition:true"
            hx-push-url="true"
            hx-indicator="#tab-loading"
            onclick="if(window.posthog) posthog.capture('theme_tab_clicked', {theme: '{{ .Name }}'})">
            <span>{{ themeEmoji .Name }}</span>
            <span class="font-medium">{{ .Name }}</span>
            {{ if .DigestCount }}
            <span class="badge badge-xs {{ if eq .ID $.ActiveTheme }}badge-neutral{{ else }}badge-ghost{{ end }}">{{ .DigestCount }}</span>
            {{ end }}
        </button>
        {{ end }}
    </div>
</div>
